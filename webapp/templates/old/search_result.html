{# This simple template derives from ``base.html``. See ``base.html`` for
more information about template inheritance. #}
{%- extends "base.html" %}

{# Loads some of the macros included with Flask-Bootstrap. We are using the
utils module here to automatically render Flask's flashed messages in a
bootstrap friendly manner #}
{% import "bootstrap/utils.html" as utils %}


{# Inside the ``content`` is where you should place most of your own stuff.
This will keep scripts at the page end and a navbar you add on later
intact. #}

{% block content %}

<div class="container-fluid">
    <h2>Search Results</h2>

    <div class="row" id="search-results">
        <div class="table-responsive col-sm-6">
            {% if not researchers %}
            <div class="alert alert-info" role="alert">
                <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                <span class="sr-only">Info:</span>
                Could not find a researcher: {{search_term}}
            </div>
            {% else %}
            <h3>Researchers</h3>
            <table class="table table-striped" id="authors">
                <thead>
                <tr>
                    <th>Name</th>
                    <th>Cited</th>
                    <th>Fields Of Study</th>
                    <th>Has Co</th>
                    <th>Org</th>
                </tr>
                </thead>
                <tbody>
                {% for researcher in researchers %}
                <tr>
                    <td><a href="/researcher/{{researcher.id}}">{{researcher.name}}</a></td>
                    <td>{%if researcher.cited%}{{researcher.cited}}{% endif %}</td>
                    <td>
                        {% for f in researcher.fields_of_study %}
                            <a href="/fos/{{f}}">{{f}}</a>
                        {% endfor %}
                    </td>
                    <td>{{researcher.hasCo}}</td>
                    <td>{% if researcher.org %}<a href="https://scholar.google.ch/citations?view_op=view_org&org={{researcher.org}}&hl=de&oi=io">GS</a>{%endif%}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
            {% endif%}
        </div>
        <div class="col-sm-6">
            {% if not fields %}
            <div class="alert alert-info" role="alert">
                <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                <span class="sr-only">Info:</span>
                Could not find a field of study: {{fos_search_term}}
            </div>
            {% else %}
            <h3>Fields of Study</h3>
            <table class="table table-striped" id="fields">
                <thead>
                <tr>
                    <th>Name</th>
                </tr>
                </thead>
                <tbody>
                {% for field in fields %}
                <tr>
                    <td><a href="/fos/{{field.field_name}}">{{field.field_name | truncate(128)}}</a></td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
            {% endif%}
        </div>
    </div>
</div>

{%- endblock %}

{% block scripts -%}
{{super()}}
<script type="text/javascript">
$(document).ready(function() {
$('#authors').DataTable();
$('#fields').DataTable();
} );
</script>
{% endblock %}
